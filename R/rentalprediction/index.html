<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Microsoft_logo.svg/2000px-Microsoft_logo.svg.png">

  <title>
    
      R Build a predictive model
    
  </title>
  <meta name="description" content="Get Started with SQL Server Machine Learning Services">
  <link rel="stylesheet" href="/en-us/sql-server/developer-get-started/ml-tutorials/assets/main.css">
  <link rel="canonical" href="https://sqlchoice.azurewebsites.net/en-us/sql-server/developer-get-started/ml-tutorials/R/rentalprediction">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62780441-15', 'auto');
  ga('send', 'pageview');
  $(document).ready(function() {
      $("code").bind({
          copy: function(event) {
              ga("send", "event", {
                  eventCategory: window.location.pathname,
                  eventAction: "copy_code"
              });
         console.log("Copy");

          }, 

          cut: function(event) {
              ga("send", "event", {
                  eventCategory: window.location.pathname,
                  eventAction: "copy_code"
              });
          }
      })

      $("a").click(function(event) {
          ga("send", "event", {
              eventCategory: window.location.pathname,
              eventAction: "click_link",
              eventLabel: event.target.href
          });
      })
  });  
  </script>



</head>


  <body>

    <header class="sql-header sql-header--empty" role="banner">
    <div class="sql-header-content">
      <img class="sql-header-micro" src="/en-us/sql-server/developer-get-started/ml-tutorials/assets/images/micro-logo.png" alt="Microsoft logo">
      
        <div class="sql-menutop">
          <a class="sql-menutop-link" href="/en-us/sql-server/developer-get-started/ml-tutorials/">Get started with Machine Learning in SQL Server</a>
          <div>
            
              
              

              <div class="sql-menutop-sub  is-active ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">R </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/en-us/sql-server/developer-get-started/ml-tutorials/R/rentalprediction" 
                                target="_self">
                                Predict ski rentals
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/en-us/sql-server/developer-get-started/ml-tutorials/R/customerclustering" 
                                target="_self">
                                Perform customer clustering
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">Python </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/en-us/sql-server/developer-get-started/ml-tutorials/python/rentalprediction" 
                                target="_self">
                                Predict ski rentals
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/en-us/sql-server/developer-get-started/ml-tutorials/python/customerclustering" 
                                target="_self">
                                Perform customer clustering
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
          </div>
        </div>

      
</header>


    <main class="sql-main" aria-label="Content">
      <div class="u-wrapper">
        <article class="sql-page_steps">

  
    
    
    

    <h1 class="sql-page_steps-hero">
      Build a predictive model using R and SQL Server ML Services
    </h1>

    <header class="sql-page_steps-steps js-stepsheader">
      
        
        

        <div class="sql-page_steps-step">
          
            <a class="sql-page_steps-link  sql-page_steps-link--active "
               href="/en-us/sql-server/developer-get-started/ml-tutorials/R/rentalprediction"
               target="_self">
               <span class="sql-page_steps-number">1</span>
               Set up your environment
              </a>
          
        </div>
      
        
        

        <div class="sql-page_steps-step">
          
            <a class="sql-page_steps-link "
               href="/en-us/sql-server/developer-get-started/ml-tutorials/R/rentalprediction/step/2.html"
               target="_self">
               <span class="sql-page_steps-number">2</span>
               Create your ML script using R
            </a>
          
        </div>
      
        
        

        <div class="sql-page_steps-step">
          
            <a class="sql-page_steps-link "
               href="/en-us/sql-server/developer-get-started/ml-tutorials/R/rentalprediction/step/3.html"
               target="_self">
               <span class="sql-page_steps-number">3</span>
               Deploy your ML script with SQL Server
            </a>
          
        </div>
      
    </header>
  

  <div class="sql-page_steps-loading js-loading">
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <div></div>
    <div></div>
    <p></p>
    <div></div>
    <div></div>
    <p></p>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <p></p>
    <p></p>
    <div></div>
    <div></div>
    <div></div>
    <p></p>
    <div></div>
    <div></div>
    <p></p>
    <p></p>
    <div></div>
    <div></div>
    
  </div>

  <div class="js-steps is-hidden">
    <p>Predictive modeling is a powerful way to add intelligence to your application. It enables applications to predict outcomes against new data. The act of incorporating predictive analytics into your applications involves two major phases: <strong>model training</strong> and <strong>model deployment</strong></p>

<p>In this tutorial, you will learn how to create a predictive model in R and deploy it with SQL Server 2016 (and above) Machine Learning Services.</p>

<p>Here is a <a href="https://www.youtube.com/watch?v=YCyj9cdi4Nk&amp;feature=youtu.be">video</a> that introduces in-database analytics and predictive modeling with R in SQL Server.</p>

<p>You can copy code as you follow this tutorial. All code is also available on <a href="https://github.com/NelGson/sql-server-samples/tree/master/samples/features/r-services/getting-started/rental-prediction">GitHub</a></p>

<h2 id="step-11-install-sql-server-with-in-database-r--machine-learning-services">Step 1.1 Install SQL Server with in-database R / Machine Learning Services</h2>
<ol>
  <li>If you don’t have SQL Server 2016 Developer (or above) installed:</li>
</ol>

<p>*Click <a href="https://www.microsoft.com/en-us/evalcenter/evaluate-sql-server-2017-ctp/"><strong>here</strong></a> to download the preview of SQL Server 2017</p>

<p>*Click here <a href="http://go.microsoft.com/fwlink/?LinkID=799009"><strong>here</strong></a> to download the SQL Server 2016 exe  (This version only supports R for Machine Learning)</p>

<ol>
  <li>Run it to start the SQL installer</li>
  <li>Click <em>Accept</em>&gt; after you have read the license terms</li>
  <li>On the <em>Feature Selection</em> page, select: R Services (In-Database) for SQL Server 2016 or Machine Learning Services (In-Database) for SQL Server 2017</li>
  <li>Don’t forget to choose R/Python or both</li>
  <li>If you chose R: On the page, <em>Consent to Install Microsoft R Open</em>&gt;, click <em>Accept</em>.</li>
  <li>If you chose Python: On the page, <em>Consent to Python</em>&gt;, click <em>Accept</em>.</li>
  <li>Click <em>Install</em> to proceed with the installation</li>
</ol>

<blockquote>
  <p>You now have SQL Server installed with in-database ML services, running locally on your Windows computer! Check out the next section to continue installing prerequisites.</p>
</blockquote>

<h2 id="step-12-install-sql-server-management-studio-ssms">Step 1.2 Install SQL Server Management Studio (SSMS)</h2>
<p>Download and install SQL Server Management studio: <a href="https://msdn.microsoft.com/en-us/library/mt238290.aspx">SSMS</a></p>

<blockquote>
  <p>Now you have installed a tool you can use to easily manage your database objects and scripts.</p>
</blockquote>

<h2 id="step-13-enable-external-script-execution">Step 1.3 Enable external script execution</h2>
<p>Run SSMS and open a new query window. Then execute the script below to enable your instance to run R scripts in SQL Server.</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code> <span class="k">EXEC</span> <span class="n">sp_configure</span> <span class="s1">'external scripts enabled'</span><span class="p">,</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">RECONFIGURE</span> <span class="k">WITH</span> <span class="n">OVERRIDE</span>
</code></pre>
</div>
<p>You can read more about configuring Machine Learning Services <a href="https://docs.microsoft.com/en-us/sql/advanced-analytics/r-services/set-up-sql-server-r-services-in-database">here</a>.
<strong>Don’t forget to restart your SQL Server Instance after the configuration!</strong> You can restart in SSMS by right clicking on the instance name in the Object Explorer and choose <em>Restart</em>.</p>

<p>Optional: If you want, you can also <a href="https://github.com/Microsoft/sql-server-samples/blob/master/samples/features/r-services/ssms-custom-reports/R%20Services%20-%20Configuration.rdl">download SSMS custom reports</a> available on github. 
The report “R Services - Configuration.rdl” for example provides an overview of the R runtime parameters and gives you an option to configure your instance with a button click.
To import a report in SSMS, right click on Server Objects in the SSMS Object Explorer and choose Reports -&gt; Custom reports. Upload the .rdl file.</p>

<blockquote>
  <p>Now you have enabled external script execution so that you can run R code inside SQL Server!</p>
</blockquote>

<h2 id="step-14-install-and-configure-your-r-development-environment">Step 1.4 Install and configure your R development environment</h2>
<ol>
  <li>You need to install an R IDE. Here are some suggestions:</li>
</ol>

<p>*R Tools for Visual Studio (RTVS) <a href="https://www.visualstudio.com/vs/rtvs">Download</a></p>

<p>*RStudio <a href="https://www.rstudio.com">Download</a></p>

<ol>
  <li>To be able to use some of the functions in this tutorial, you need to configure your R IDE to point to Microsoft R Client, which is an R Runtime provided by Microsoft. This runtime contains MS R Open packages.</li>
</ol>

<p>Follow the steps 1 and 2 <a href="https://msdn.microsoft.com/en-us/microsoft-r/r-client-get-started#configure-ide">here</a> to install R client and configure your R IDE tool.</p>

<blockquote>
  <p>Terrific, now your SQL Server instance is able to host and run R code and you have the necessary development tools installed and configured! 
The next section will walk you through creating a predictive model using R.</p>
</blockquote>


  </div>

   
    
    
      

      

      <a class="sql-page_steps-next"
        href="/en-us/sql-server/developer-get-started/ml-tutorials/R/rentalprediction/step/2.html"
        target="_self">
        Go to step 2
      </a>

    
  

  <div class="sql-questions">
    <h2 class="sql-questions-title">
        Have Questions?
    </h2>
    <p class="sql-questions-text">
        Happy to help! You can find us on <a href="https://github.com/Microsoft/sql-server-samples/tree/master/samples/tutorials" target="_blank">GitHub</a>, <a href="https://social.msdn.microsoft.com/Forums/en-US/home target="_blank"">MSDN Forums</a>, and StackOverflow. We also monitor the <a href="https://twitter.com/search?q=%23SQLServerDev&amp;src=typd" target="_blank">#SQLServerDev</a> hashtag on Twitter.
    </p>
</div>

  
      <footer class="sql-disqus">
        

      </footer>
  
</article>

      </div>
    </main>

    <footer class="sql-footer">
  




    <div class="sql-footer-copy">
        <a class="sql-footer-link" href="https://go.microsoft.com/?linkid=2028325">Contact us</a> | 
        <a class="sql-footer-link" href="https://go.microsoft.com/fwlink/?LinkId=521839">Privacy & cookies</a> | 
        <a class="sql-footer-link" href="https://go.microsoft.com/fwlink/?LinkID=206977">Terms of use</a> | 
        <a class="sql-footer-link" href="https://www.microsoft.com/trademarks">Trademarks</a> | 
        <a class="sql-footer-link" href="https://choice.microsoft.com/">About our ads</a> | 
        © 2017 Microsoft 
      <!--
        <a href="#" target="_blank" class="sql-footer-icon fa fa-twitter" aria-hidden="true" style="float:right;"></a>
        <a href="#" target="_blank" class="sql-footer-icon fa fa-github" aria-hidden="true" style="float:right;"></a>
      -->
    </div>

           
</footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js" type="text/javascript"></script>
<script src="https://use.fontawesome.com/c7b2a63f93.js"></script>
<script src="/en-us/sql-server/developer-get-started/ml-tutorials/assets/scripts/prism.js" type="text/javascript"></script>
<script src="/en-us/sql-server/developer-get-started/ml-tutorials/assets/scripts/steps.js" type="text/javascript"></script>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'Microsoft/mssql-developers'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
  </body>

</html>
